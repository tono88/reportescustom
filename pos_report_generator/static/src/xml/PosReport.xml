<?xml version="1.0" encoding="UTF-8"?>
<!-- Template for pos report -->
<templates>
    <t t-name="PosReport">
        <div class="" t-ref="root-PosReport" style="overflow-y: scroll;height:840px">
            <div>
                <center>
                    <h1 style="margin: 20px;">Reporte de Punto de Venta</h1>
                </center>
            </div>
            <div>
                <div style="margin-right: 10px; margin-left: 10px; display:flex; flex-wrap: wrap;">
                    <div class="sub_container_left"
                         style="width: 100%; margin-left: 0; display:flex; gap:8px; margin-bottom:6px;">
                        <div class="report_print row">
                            <div class="col-md-6 col-6">
                                <button type="button" class="btn btn-primary"
                                        id="pdf" t-on-click="print_pdf"
                                        style="top: 0px; height: 42px; color: white; background-color: #7c7bad; border-color: #7c7bad; width: 127px;">
                                    Imprimir (PDF)
                                </button>
                            </div>
                            <div class="col-md-6 col-6">
                                <button type="button"
                                        class="btn btn-primary ml-3"
                                        id="xlsx" t-on-click="print_xlsx"
                                        style="top: 0px; height: 42px; color: white; background-color: #7c7bad; border-color: #7c7bad; width: 127px;">
                                    Exportar (XLSX)
                                </button>
                            </div>
                        </div>
                    </div>
                    <br/>
                    <div class="sub_container_right "
                         style="width: 100%; display: flex; flex-wrap: wrap; align-items: center; justify-content: center; gap: 12px; margin-bottom: 20px;">
                        <div class="time_range_pos" style="">
                            <a type="button" class="dropdown-toggle"
                               data-bs-toggle="dropdown">
                                <span class="fa fa-calendar" title="Dates"
                                      role="img" aria-label="Dates"/>
                                Rango de fechas
                            </a>
                            <div class="dropdown-menu pos-dropdown" role="menu">
                                <div class="form-group">
                                    <label class="" for="date_from">Start Date
                                        :
                                    </label>
                                    <div class="input-group date" id="date_from"
                                         data-target-input="nearest">
                                        <input type="date" name="date_from"
                                               class="form-control date_from datetimepicker-input"
                                               data-target="#date_from"
                                               t-att-name="prefix"/>
                                    </div>
                                    <label class="" for="date_to">Hasta :
                                    </label>
                                    <div class="input-group date" id="date_to"
                                         data-target-input="nearest">
                                        <input type="date" name="date_to"
                                               class="form-control date_to datetimepicker-input"
                                               data-target="#date_to"
                                               t-att-name="prefix"/>
                                    </div>
</div>
                            </div>
                        </div>
                        <div class="search-Result-Selection" style="">
                            <a type="button" class="dropdown-toggle report-type"
                               data-bs-toggle="dropdown">
                                <span class="fa fa-book"/>
                                Tipo de reporte:
                            </a>
                            <select id="selection"
                                    class="dropdown-menu pos-dropdown report_type"
                                    name="states[]" t-ref="report-type">
                                <div role="separator" class="dropdown-divider"/>
                                <option value="report_by_order" selected="">
                                    Report By Order
                                </option>
                                <option value="report_by_order_detail">Report By
                                    Order Detail
                                </option>
                                <option value="report_by_product">Report By
                                    Product
                                </option>
                                <option value="report_by_categories">Report By
                                    Categories
                                </option>
                                <option value="report_by_salesman">Report By
                                    Salesman
                                </option>
                                <option value="report_by_payment">Report By
                                    Payment
                                </option>
                            </select>
                            <span id="report_res"/>
                        </div>
                        <div class="order-state-inline" style="">
                            <label style="margin-right:6px;">Estado de la orden:</label>
                            <select class="form-control order_state" style="min-width: 180px; display:inline-block; height: 42px;">
                                <option value="">-- Cualquiera --</option>
                                <option value="draft">Draft</option>
                                <option value="done">No facturado</option>
                                <option value="invoiced">Facturado</option>
                                <option value="cancel">Cancelado</option>
                            </select>
                        </div>

                        <div style="">
                            <button type="button" id="apply_filter"
                                    t-on-click="apply_filter"
                                    class="btn btn-primary"
                                    style="top: 0px; height: 42px; color: white; background-color: #7c7bad; border-color: #7c7bad; width: 100px;">
                                Apply
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div>
                <div class="table_view_pr" style="width: 95%; margin: auto;" t-ref="table-view"/>
            </div>
        </div>
    </t>

    <t t-name="PosOrderTable">
        <!-- Report for Pos Orders -->
        <div t-if="order.report_type == 'report_by_order'">
            <div class="table_main_view">
                <table cellspacing="0" width="100%">
                    <thead>
                        <tr class="table_pos_head">
                            <th>TPV</th>
                            <th class="mon_fld">Orden</th>
                            <th class="mon_fld">Fecha de pedido</th>
                            <th class="mon_fld">Cliente</th>
                            <th class="mon_fld">Vendedor</th>
                            <th class="mon_fld">Total Cant.</th>
                            <th class="mon_fld">Importe Total</th>
                            <th class="mon_fld">Nota</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-foreach="report_lines" t-as="pos_report"
                           t-key="pos_report.id">
                            <tr t-if="pos_report['sum']" style="border: 1.5px solid black;"
                                class="ps-line"
                                t-att-data-account-id="pos_report['id']"
                                t-attf-data-target=".a{{pos_report['id']}}">
                                <td style="border: 0px solid black;">
                                    <i class="fa fa-caret-down" role="img"
                                       aria-label="Unfolded" title="Unfolded"/>
                                    <span>
                                        <t t-esc="pos_report['shop']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['session']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['date_order']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['name']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['salesman']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['sum']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['amount_total']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['general_note']"/>
                                    </span>
                                </td>
                            </tr>
                        </t>
                    </tbody>
                </table>
            </div>
        </div>
        <!-- Report for Order details -->
        <div t-if="order.report_type == 'report_by_order_detail'">
            <div class="table_main_view">
                <table cellspacing="0" width="100%">
                    <thead>
                        <tr class="table_pos_head">
                            <th>TPV</th>
                            <th class="mon_fld">Orden</th>
                            <th class="mon_fld">Fecha de pedido</th>
                            <th class="mon_fld">Cliente</th>
                            <th class="mon_fld">Vendedor</th>
                            <th class="mon_fld">Código de producto</th>
                            <th class="mon_fld">Producto</th>
                            <th class="mon_fld">Precio unit.</th>
                            <th class="mon_fld">Cant.</th>
                            <th class="mon_fld">Subtotal</th>
                            <th class="mon_fld">Subtotal (Imp. incl.)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-foreach="report_lines" t-as="pos_report"
                           t-key="pos_report.id">
                            <tr style="border: 1.5px solid black;"
                                class="ps-line"
                                data-toggle="collapse"
                                t-att-data-account-id="pos_report['id']"
                                t-attf-data-target=".a{{pos_report['id']}}">
                                <td style="border: 0px solid black;">
                                    <i class="fa fa-caret-down" role="img"
                                       aria-label="Unfolded" title="Unfolded"/>
                                    <span>
                                        <t t-esc="pos_report['shop']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['session']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['date_order']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['name']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['salesman']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['default_code']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['full_product_name']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['price_unit']"/>
                                    </span>
                                </td>

                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['sum']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['price_subtotal']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['price_subtotal_incl']"/>
                                    </span>
                                </td>
                            </tr>
                        </t>
                    </tbody>
                </table>
            </div>
        </div>
        <!-- Report for product -->
        <div t-if="order.report_type == 'report_by_product'">
            <div class="table_main_view">
                <table cellspacing="0" width="100%">
                    <thead>
                        <tr class="table_pos_head">
                            <th>Categoría</th>
                            <th class="mon_fld">Código de producto</th>
                            <th class="mon_fld">Producto</th>
                            <th class="mon_fld">Cant.</th>
                            <th class="mon_fld">Importe Total</th>
                            <th class="mon_fld">Importe Total (Imp. incl.)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-foreach="report_lines" t-as="pos_report"
                           t-key="pos_report.id">
                            <tr style="border: 1.5px solid black;"
                                class="ps-line"
                                data-toggle="collapse"
                                t-att-data-account-id="pos_report['id']"
                                t-attf-data-target=".a{{pos_report['id']}}">
                                <td style="border: 0px solid black;">
                                    <i class="fa fa-caret-down" role="img"
                                       aria-label="Unfolded" title="Unfolded"/>
                                    <span>
                                        <t t-esc="pos_report['name']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['default_code']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['full_product_name']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['qty']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['amount_total']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['amount_paid']"/>
                                    </span>
                                </td>
                            </tr>
                        </t>
                    </tbody>
                </table>
            </div>
        </div>
        <!-- Report for Categories -->
        <div t-if="order.report_type == 'report_by_categories'">
            <div class="table_main_view">
                <table cellspacing="0" width="100%">
                    <thead>
                        <tr class="table_pos_head">
                            <th>Categoría</th>
                            <th class="mon_fld">Cant.</th>
                            <th class="mon_fld">Importe Total</th>
                            <th class="mon_fld">Importe Total (Imp. incl.)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-foreach="report_lines" t-as="pos_report"
                           t-key="pos_report.id">
                            <tr style="border: 1.5px solid black;"
                                class="ps-line"
                                data-toggle="collapse"
                                t-att-data-account-id="pos_report['id']"
                                t-attf-data-target=".a{{pos_report['id']}}">
                                <td style="border: 0px solid black;">
                                    <i class="fa fa-caret-down" role="img"
                                       aria-label="Unfolded" title="Unfolded"/>
                                    <span>
                                        <t t-esc="pos_report['name']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['qty']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['amount_total']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['total_incl']"/>
                                    </span>
                                </td>
                            </tr>
                        </t>
                    </tbody>
                </table>
            </div>
        </div>
        <!-- Report for Salesman -->
        <div t-if="order.report_type == 'report_by_salesman'">
            <div class="table_main_view">
                <table cellspacing="0" width="100%">
                    <thead>
                        <tr class="table_pos_head">
                            <th>Vendedor</th>
                            <th class="mon_fld">Total Órdenes</th>
                            <th class="mon_fld">Total Cant.</th>
                            <th class="mon_fld">Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-foreach="report_lines" t-as="pos_report"
                           t-key="pos_report.id">
                            <tr style="border: 1.5px solid black;"
                                class="ps-line"
                                data-toggle="collapse"
                                t-att-data-account-id="pos_report['id']"
                                t-attf-data-target=".a{{pos_report['id']}}">
                                <td style="border: 0px solid black;">
                                    <i class="fa fa-caret-down" role="img"
                                       aria-label="Unfolded" title="Unfolded"/>
                                    <span>
                                        <t t-esc="pos_report['name']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['order']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['qty']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['amount']"/>
                                    </span>
                                </td>
                            </tr>
                        </t>
                    </tbody>
                </table>
            </div>
        </div>
        <!-- Report for Payment -->
        <div t-if="order.report_type == 'report_by_payment'">
            <div class="table_main_view">
                <table cellspacing="0" width="100%">
                    <thead>
                        <tr class="table_pos_head">
                            <th>Punto de Venta</th>
                            <th class="mon_fld">Sesión TPV</th>
                            <th class="mon_fld">Pago</th>
                            <th class="mon_fld">Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-foreach="report_lines" t-as="pos_report"
                           t-key="pos_report.id">
                            <tr style="border: 1.5px solid black;"
                                class="ps-line"
                                data-toggle="collapse"
                                t-att-data-account-id="pos_report['id']"
                                t-attf-data-target=".a{{pos_report['id']}}">
                                <td style="border: 0px solid black;">
                                    <i class="fa fa-caret-down" role="img"
                                       aria-label="Unfolded" title="Unfolded"/>
                                    <span>
                                        <t t-esc="pos_report['config']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['session']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-foreach="pos_report['name']"
                                           t-as="nme" t-key="nme.id">
                                            <t t-esc="pos_report['name'][nme]"/>
                                        </t>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['sum']"/>
                                    </span>
                                </td>
                            </tr>
                        </t>
                    </tbody>
                </table>
            </div>
        </div>
    </t>
</templates>