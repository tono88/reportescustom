<?xml version="1.0" encoding="UTF-8"?>
<odoo>
  <!-- hereda el template del módulo original para evitar duplicados -->
  <template id="qr_footer" inherit_id="l10n_gt_fel_megaprint_report.report_fel_invoice">
    <xpath expr="//main[contains(@class,'fel')]" position="inside">
      <!-- Pie: Logo FEL + QR SAT -->
      <div style="display:flex;justify-content:space-between;align-items:center;margin-top:10px;border-top:1px solid #ddd;padding-top:8px;">
        <div style="display:flex;align-items:center;gap:10px;">
          <img t-att-src="'/l10n_gt_fel_megaprint_qr_footer/static/src/img/fel_logo.png'" style="height:38px;"/>
          <div style="font-size:10pt;">Documento Tributario Electrónico (FEL)</div>
        </div>
        <div style="text-align:right;">
          <img t-att-src="'/report/barcode/QR/%s?width=120&height=120&humanreadable=0' % (o.fel_qr_encoded or '')" alt="FEL QR"/>
          <div style="font-size:8pt;color:#555;margin-top:4px;max-width:260px;word-break:break-all;">
            <t t-if="o._fields.get('firma_fel')">
              <span class="fw-bold">Firma FEL: </span><span t-esc="o.firma_fel or ''"/>
            </t>
          </div>
        </div>
      </div>
    </xpath>
  </template>
</odoo>